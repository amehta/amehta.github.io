<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author"
    content="Apurva">
<meta name="description"
    content="What is DHCP ? DHCP is a protocol used to provide an IP address to a device. It is also used to configure additional networking related parameters on the device like subnet mask, router, domain name, and dns server.
Why DHCP ? DHCP stands for dynamic host configuration protocol and so allows a device to get an IP address without any manual intervention as long as the dhcp client is enabled and running on the device." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://amehta.github.io/posts/2011/09/how-does-dhcp-work/" />


<title>
    
    How does DHCP work? :: Tech Log  — Hello Friend NG Theme
    
</title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="https://amehta.github.io/main.min.0d47b4686e972122bd29f0c1e3dd024a2d541cd8b1b543622520822ea6f4238a.css">



<link rel="apple-touch-icon" sizes="180x180" href="https://amehta.github.io/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://amehta.github.io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://amehta.github.io/favicon-16x16.png">
<link rel="manifest" href="https://amehta.github.io/site.webmanifest">
<link rel="mask-icon" href="https://amehta.github.io/safari-pinned-tab.svg" color="#252627">
<link rel="shortcut icon" href="https://amehta.github.io/favicon.ico">
<meta name="theme-color" content="#252627"><meta itemprop="name" content="How does DHCP work?">
<meta itemprop="description" content="What is DHCP ? DHCP is a protocol used to provide an IP address to a device. It is also used to configure additional networking related parameters on the device like subnet mask, router, domain name, and dns server.
Why DHCP ? DHCP stands for dynamic host configuration protocol and so allows a device to get an IP address without any manual intervention as long as the dhcp client is enabled and running on the device.">


<meta itemprop="datePublished" content="2011-09-10T00:08:00-08:00" />
<meta itemprop="dateModified" content="2011-09-10T00:08:00-08:00" />
<meta itemprop="wordCount" content="532">



<meta itemprop="keywords" content="DHCP," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://amehta.github.io"/>

<meta name="twitter:title" content="How does DHCP work?"/>
<meta name="twitter:description" content="What is DHCP ? DHCP is a protocol used to provide an IP address to a device. It is also used to configure additional networking related parameters on the device like subnet mask, router, domain name, and dns server.
Why DHCP ? DHCP stands for dynamic host configuration protocol and so allows a device to get an IP address without any manual intervention as long as the dhcp client is enabled and running on the device."/>



<meta property="article:section" content="networking" />

<meta property="article:published_time" content="2011-09-10 00:08:00 -0800 -0800" />







    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://amehta.github.io/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /home/</span>
            <span class="logo__cursor"></span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://amehta.github.io/about/">About</a></li><li><a href="https://amehta.github.io/posts/">Posts</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>3 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title"><a href="https://amehta.github.io/posts/2011/09/how-does-dhcp-work/">How does DHCP work?</a></h1>

            

            <div class="post-content">
                

<h3 id="what-is-dhcp">What is DHCP ?</h3>

<p><code>DHCP</code> is a protocol used to provide an IP address to a device. It is also used to configure additional networking related parameters on the device like subnet mask, router, domain name, and dns server.</p>

<h3 id="why-dhcp">Why DHCP ?</h3>

<p><code>DHCP</code> stands for <code>dynamic host configuration protocol</code> and so allows a device to get an IP address without any manual intervention as long as the dhcp client is enabled and running on the device.</p>

<p>Autoconfigure.
No longer have to manually assign address and configurations on every device
No conflicting IP addresses
No longer have to track each and every ip address that was assigned.
Reuse of IP addresses
If an ip address is not in use, it can be used by some other device</p>

<h3 id="how-it-works">How it works ?</h3>

<p>Most devices on boot up do not have an IP address unless configured statically. To get to the network the device would need to first find a dhcp server to get an IP address. Since it does not know the address of the <strong>dhcp server</strong>, the <strong>dhcp client</strong> (running in the device) sends a UDP broadcast packet <code>(DHCP Discover)</code> in the network. All the devices in the network will see be able to see this packet and if there is one or more dhcp server<code>☨</code> in the network, they will respond back to the client with an offer <code>(DHCP offer)</code>. The <code>DHCP offer</code> includes an <strong>IP address</strong>, <strong>subnet mask</strong>, <strong>lease time</strong>, <strong>router</strong> and other parameters as configured on the server by an administrator or requested by the client.</p>

<p>If multiple offers were received by the client, then it can decide which offer to accept and accordingly send a broadcast packet requesting <code>(DHCP Request)</code> an IP address from one of the offers. The dhcp server can identify themselves by the <code>&quot;transaction id&quot;</code> field in the request. All the other servers on receiving the request packet will withdraw their offers and return it back to their pool of addresses. The dhcp server that got selected by the client finally concludes the process by sending an acknowledgment <code>(DHCP Ack)</code> and any other information that the client may have requested.</p>

<p><code>☨</code> If dhcp server is not in the same subnet, a dhcp relay-agent can be used to forward the request.</p>

<h3 id="how-to-verify">How to verify ?</h3>

<p>It&rsquo;s pretty easy to follow the <strong>DHCP Handshake</strong> on Wireshark. Since, all the handshake happens using broadcast packets, you can pretty much see any device trying to get an IP address using DHCP in your local network. Once you fire up Wireshark start taking live traces on your network interface. To filter out the other noise you can filter baded on a UDP port. <code>(DHCP server listens on port 67)</code>. Next take some other device (laptop, iPod, iPad,) in your local network and power it on. You should be able to immediately see the entire handshake on your Wireshark window. If you do not see the first two steps and only see the <code>DHCP Request</code>, and <code>DHCP Ack</code>, it probably means that your device already has a preconfigured ip address and is requesting the server to extends it&rsquo;s lease.</p>

<h3 id="screenshot">Screenshot</h3>

<p><code>Missing after porting blog to github pages</code></p>

<h3 id="packet-flow">Packet Flow</h3>

<p><a href="http://www.eventhelix.com/RealtimeMantra/Networking/DHCP.pdf" target="_blank">http://www.eventhelix.com/RealtimeMantra/Networking/DHCP.pdf</a></p>

<h4 id="references">References</h4>

<p><a href="http://tools.ietf.org/html/rfc2131" target="_blank">http://tools.ietf.org/html/rfc2131</a></p>

            </div>
        </article>

        <hr />

        <div class="post-info">
                <p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://amehta.github.io/tags/dhcp">DHCP</a></span>
                </p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>532 Words</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2011-09-10 01:08 -0700</p>
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h"></span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="https://amehta.github.io/posts/2011/09/dropbox-lan-sync-protocol/">
                                <span class="button__icon">←</span>
                                <span class="button__text">Dropbox: LAN Sync Protocol</span>
                            </a>
                        </span>
                    

                    
                </div>
            </div>
        

        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2019</span>
            
                <span><a href="https://amehta.github.io">Apurva Mehta</a></span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            <span> <a href="https://amehta.github.io/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">

        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="https://amehta.github.io/bundle.min.4c3fb12a087ceed4a52cb5d57068a9795c7069617a01ca70f788052ad66e1791779e6c72686e1dc0ca13dc03b0203204b6566bb0dd1ee80de2b7ff4d8fe53db2.js" integrity="sha512-TD&#43;xKgh87tSlLLXVcGipeVxwaWF6Acpw94gFKtZuF5F3nmxyaG4dwMoT3AOwIDIEtlZrsN0e6A3it/9Nj&#43;U9sg=="></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-144111621-3', 'auto');
        ga('send', 'pageview');
    </script>



    </body>
</html>
